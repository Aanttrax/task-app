import{a as C,b as m,c as N,d as y,e as R,f as S,g as b,h as E,i as T,j as q}from"./chunk-YHZD75S7.js";import{A as r,F as h,J as d,M as _,N as u,O as s,R as n,S as l,T as p,V as v,W as c,Z as o,p as g,ra as w,ua as P}from"./chunk-ZGCPPB2D.js";function F(t,a){t&1&&(n(0,"span"),o(1,"* Required field"),l())}function A(t,a){t&1&&(n(0,"span"),o(1,"* Required more characters"),l())}function L(t,a){if(t&1&&(n(0,"div",7),d(1,F,2,0,"span")(2,A,2,0,"span"),l()),t&2){let i=c();r(),s(!(i.name==null||i.name.errors==null)&&i.name.errors.required?1:-1),r(),s(!(i.name==null||i.name.errors==null)&&i.name.errors.minlength?2:-1)}}function k(t,a){t&1&&(n(0,"span"),o(1,"* Required field"),l())}function V(t,a){t&1&&(n(0,"span"),o(1,"* Required more characters"),l())}function D(t,a){if(t&1&&(n(0,"div",7),d(1,k,2,0,"span")(2,V,2,0,"span"),l()),t&2){let i=c();r(),s(!(i.lastName==null||i.lastName.errors==null)&&i.lastName.errors.required?1:-1),r(),s(!(i.lastName==null||i.lastName.errors==null)&&i.lastName.errors.minlength?2:-1)}}function G(t,a){t&1&&(n(0,"span"),o(1,"* Required field"),l())}function M(t,a){t&1&&(n(0,"span"),o(1,"* Required more characters"),l())}function B(t,a){if(t&1&&(n(0,"div",7),d(1,G,2,0,"span")(2,M,2,0,"span"),l()),t&2){let i=c();r(),s(!(i.userName==null||i.userName.errors==null)&&i.userName.errors.required?1:-1),r(),s(!(i.userName==null||i.userName.errors==null)&&i.userName.errors.minlength?2:-1)}}function U(t,a){t&1&&(n(0,"span"),o(1,"* Required field"),l())}function j(t,a){t&1&&(n(0,"span"),o(1,"* Email not valid "),l())}function I(t,a){t&1&&(n(0,"span"),o(1,"* Email already used "),l())}function J(t,a){if(t&1&&(n(0,"div",7),d(1,U,2,0,"span")(2,j,2,0,"span")(3,I,2,0,"span"),l()),t&2){let i=c();r(),s(!(i.email==null||i.email.errors==null)&&i.email.errors.required?1:-1),r(),s(!(i.email==null||i.email.errors==null)&&i.email.errors.email?2:-1),r(),s(!(i.email==null||i.email.errors==null)&&i.email.errors.customError?3:-1)}}function Y(t,a){t&1&&(n(0,"span"),o(1,"* Required field"),l())}function z(t,a){t&1&&(n(0,"span"),o(1,"* Required more characters"),l())}function H(t,a){if(t&1&&(n(0,"div",7),d(1,Y,2,0,"span")(2,z,2,0,"span"),l()),t&2){let i=c();r(),s(!(i.password==null||i.password.errors==null)&&i.password.errors.required?1:-1),r(),s(!(i.password==null||i.password.errors==null)&&i.password.errors.minlength?2:-1)}}function K(t,a){t&1&&(n(0,"span"),o(1,"* Required field"),l())}function O(t,a){t&1&&(n(0,"span"),o(1,"* Password doesn't match"),l())}function Q(t,a){if(t&1&&(n(0,"div",7),d(1,K,2,0,"span")(2,O,2,0,"span"),l()),t&2){let i=c();r(),s(!(i.verifyPassword==null||i.verifyPassword.errors==null)&&i.verifyPassword.errors.required?1:-1),r(),s(!(i.verifyPassword==null||i.verifyPassword.errors==null)&&i.verifyPassword.errors.mismatch?2:-1)}}var x=class t{formBuilder=g(T);router=g(w);authService=g(P);passwordMatchValidator=a=>{let i=a.get("password")?.value,e=a.get("verifyPassword")?.value;return i!==e?(a.get("verifyPassword")?.setErrors({mismatch:!0}),{mismatch:!0}):null};RegisterForm=this.formBuilder.group({name:["",[m.required,m.minLength(3)]],lastName:["",[m.required,m.minLength(3)]],userName:["",[m.required,m.minLength(3)]],email:["",[m.required,m.email]],password:["",[m.required,m.minLength(3)]],verifyPassword:["",[m.required,m.minLength(3)]]},{validators:[this.passwordMatchValidator]});redirectToDashboard(){this.router.navigate(["/dashboard"])}redirectToLogin(){this.router.navigate(["/login"])}submitRegisterForm(){this.authService.signUp(this.RegisterForm.value).subscribe({next:a=>{a&&(this.authService.saveToken(a),this.authService.setAuthenticate(),this.redirectToDashboard())},error:a=>{a.error.error.includes("duplicate key error")&&this.email?.setErrors({customError:!0}),this.RegisterForm.setErrors({invalid:!0})}})}get name(){return this.RegisterForm.get("name")}get lastName(){return this.RegisterForm.get("lastName")}get userName(){return this.RegisterForm.get("userName")}get email(){return this.RegisterForm.get("email")}get password(){return this.RegisterForm.get("password")}get verifyPassword(){return this.RegisterForm.get("verifyPassword")}static \u0275fac=function(i){return new(i||t)};static \u0275cmp=h({type:t,selectors:[["app-register"]],decls:42,vars:20,consts:[["data-bs-theme","dark","data-lt-installed","true",1,"d-flex","align-items-center","py-4","bg-body-tertiary",2,"height","100%"],[1,"w-100","m-auto",2,"max-width","330px","padding","1rem"],[3,"ngSubmit","formGroup"],[1,"h3","mb-3","fw-normal"],[1,"form-floating","my-2"],["id","floatingName","type","text","formControlName","name","minlength","15","placeholder","Jhon",1,"form-control"],["for","floatingName"],[1,"text-danger"],["id","floatingLastName","type","text","formControlName","lastName","minlength","15","placeholder","Smitt",1,"form-control"],["for","floatingLastName"],["id","floatingUserName","type","text","formControlName","userName","minlength","15","placeholder","Aanttrax",1,"form-control"],["for","floatingUserName"],["id","floatingEmail","type","email","formControlName","email","placeholder","name@example.com",1,"form-control"],["for","floatingEmail"],["formControlName","password","type","password","id","floatingPassword","placeholder","Password",1,"form-control"],["for","floatingPassword"],["formControlName","verifyPassword","type","password","id","floatingVerifyPassword","placeholder","verifyPassword",1,"form-control"],["for","floatingVerifyPassword"],["type","submit",1,"btn","btn-primary","w-100","py-2",3,"disabled"],[1,"my-2","text-center"],["tabindex","0",1,"text-primary",2,"cursor","pointer",3,"click","keydown.enter","keydown.space"]],template:function(i,e){i&1&&(n(0,"body",0)(1,"main",1)(2,"form",2),v("ngSubmit",function(){return e.submitRegisterForm()}),n(3,"h1",3),o(4,"Please Register"),l(),n(5,"div",4),p(6,"input",5),n(7,"label",6),o(8,"Name"),l()(),d(9,L,3,2,"div",7),n(10,"div",4),p(11,"input",8),n(12,"label",9),o(13,"lastName"),l()(),d(14,D,3,2,"div",7),n(15,"div",4),p(16,"input",10),n(17,"label",11),o(18,"userName"),l()(),d(19,B,3,2,"div",7),n(20,"div",4),p(21,"input",12),n(22,"label",13),o(23,"Email address"),l()(),d(24,J,4,3,"div",7),n(25,"div",4),p(26,"input",14),n(27,"label",15),o(28,"Password"),l()(),d(29,H,3,2,"div",7),n(30,"div",4),p(31,"input",16),n(32,"label",17),o(33,"verifyPassword"),l()(),d(34,Q,3,2,"div",7),n(35,"button",18),o(36," Sign in "),l(),n(37,"div",19)(38,"p"),o(39," \xBFYa tienes una cuenta?\xA0"),n(40,"span",20),v("click",function(){return e.redirectToLogin()})("keydown.enter",function(){return e.redirectToLogin()})("keydown.space",function(){return e.redirectToLogin()}),o(41,"Return to Login"),l()()()()()()),i&2&&(r(2),_("formGroup",e.RegisterForm),r(4),u("is-invalid",(e.name==null?null:e.name.invalid)&&(e.name==null?null:e.name.touched)),r(3),s(e.name!=null&&e.name.invalid&&(e.name!=null&&e.name.touched)?9:-1),r(2),u("is-invalid",(e.lastName==null?null:e.lastName.invalid)&&(e.lastName==null?null:e.lastName.touched)),r(3),s(e.lastName!=null&&e.lastName.invalid&&(e.lastName!=null&&e.lastName.touched)?14:-1),r(2),u("is-invalid",(e.userName==null?null:e.userName.invalid)&&(e.userName==null?null:e.userName.touched)),r(3),s(e.userName!=null&&e.userName.invalid&&(e.userName!=null&&e.userName.touched)?19:-1),r(2),u("is-invalid",(e.email==null?null:e.email.invalid)&&(e.email==null?null:e.email.touched)),r(3),s(e.email!=null&&e.email.invalid&&(e.email!=null&&e.email.touched)?24:-1),r(2),u("is-invalid",(e.password==null?null:e.password.invalid)&&(e.password==null?null:e.password.touched)),r(3),s(e.password!=null&&e.password.invalid&&(e.password!=null&&e.password.touched)?29:-1),r(2),u("is-invalid",(e.verifyPassword==null?null:e.verifyPassword.invalid)&&(e.verifyPassword==null?null:e.verifyPassword.touched)),r(3),s(e.verifyPassword!=null&&e.verifyPassword.invalid&&(e.verifyPassword!=null&&e.verifyPassword.touched)?34:-1),r(),_("disabled",e.RegisterForm.invalid))},dependencies:[q,R,C,N,y,E,S,b],encapsulation:2,changeDetection:0})};export{x as RegisterPage};
